<!-- # Отчет по лабораторной работе №1 -->
#### «Национальный исследовательский университет ИТМО»
### Основы профессиональной деятельности
## Лабораторная работа 3
## Вариант 3113
### Хабнер Георгий, P3131
###  2022

## Задание
> По выданному преподавателем варианту восстановить текст заданного варианта программы, определить предназначение и составить описание программы, определить область представления и область допустимых значений исходных данных и результата, выполнить трассировку программы.

## Исходные данные

| Адрес | Код  | Мнемоника      | Комментарий                                                              |
|-------|------|----------------|--------------------------------------------------------------------------|
| 4AE   | 04C7 | F              | переменная F                                                             |
| 4AF   | 0200 | G              | Ячейка с адресом конца массива                                           |
| 4B0   | E000 | M              | M (Ячейка с кол-вом итераций массива)                                    |
| 4B1   | E000 | E              | переменная E = F100                                                      |
| 4B2   | AF40 | LD #0x40       | Запись значения 0x40 в аккумулятор                                       |
| 4B3   | 0680 | SWAB           | Обмен ст. и мл. байта аккумулятора                                       |
| 4B4   | 0500 | ASL            | Умножить AC на 2                                                         |
| 4B5   | EEFB | ST (IP - 5)    | Запись значения аккумулятора в E                                         |
| 4B6   | AF04 | LD #0x04       | Запись значения #0x04 в аккумулятор                                      |
| 4B7   | EEF8 | ST (IP - 8)    | Запись значения аккумулятора в M                                         |
| 4B8   | 4EF5 | ADD (IP - 11)  | Сложить F с аккумулятором и записать в аккумулятор                       |
| 4B9   | EEF5 | ST (IP - 11)   | Запись значения аккумулятора в G                                         |
| 4BA   | ABF4 | LD -(IP - 12)  | Записать в аккумулятор значение ячейки массива                           |
| 4BB   | 0480 | ROR            | Циклический сдвиг вправо значения аккумулятора                           |
| 4BC   | F407 | BCS            | если флаг С==1 перейти в ячейку 0x4С4                                    |
| 4BD   | 0480 | ROR            | Циклический сдвиг вправо значения аккумулятора                           |
| 4BE   | F405 | BCS            | если флаг С==1 перейти в ячейку 0x4С4                                    |
| 4BF   | 0400 | ROL            | Циклический сдвиг влево значения аккумулятора                            |
| 4C0   | 0400 | ROL            | Циклический сдвиг влево значения аккумулятора                            |
| 4C1   | 7EEF | CMP            | выставить флаги по разности значения ячейки E и аккумулятора             |
| 4C2   | F801 | BLT            | если флаг N!=V перейти в ячейку 0x4С4                                    |
| 4C3   | EEED | ST (IP - 19)   | Запись значения аккумулятора в E                                         |
| 4C4   | 84B0 | LOOP 0x4B0     | Цикл со счетчиком M                                                      |
| 4C5   | CEF4 | JUMP (IP - 12) | перейти в начало цикла (0x4BA)                                           |
| 4C6   | 0100 | HLT            | Остановка                                                                |
| 4C7   | 0802 | A              | Ячейка массива A                                                         |
| 4C8   | F003 | B              | Ячейка массива B                                                         |
| 4C9   | D4BA | C              | Ячейка массива C                                                         |
| 4CA   | F100 | D              | Ячейка массива D                                                         |


##Функция вычисляемая программой
Вычисление максимального значения массива, делящегося без остатка на 4 и большее E.

Проходимся по массиву в обратном порядке, начиная с ячейки D.
За счет побитобых сдвигов узнаем оканчивается ли число на 00 (таким образом получаем числа, делящиеся на 4).
Если да, сравниваем его со значением, лежащим в ячейке E и записываем туда максимальное из них. 
(Т.е. узнаем флаги разности рассматриваемого числа и значения ячейки E и если оно больше записываем в E.)

##ОП и ОДЗ программы

F (0x4AE)- адрес начала массива (в общем случае может принимать значения от 0x000 до 0x7FF)
G (0x4AF)- адрес текущего обрабатываемого в цикле элемента массива (в общем случае может принимать значения от 0x000 до 0x7FF)
M (0x4B0) - счетчик цикла, равный размеру массива, в нашем случае 4 (в общем случае может прнимать значения до 2023 так как необходимо 25 ячеек под программу и переменные)
A, B, C, D (0x4C7-0x4CA) - массив знаковых чисел (от -2^15 до 2^15-1)
E (0x4B1) - знаковое число, равное элементу массива или ранее заданному элементу

<!-- C, D, E - набор из 16 логических однобитовых значений -->

<!-- ###Трассировка -->

| Адрес | Знач | IP  | CR   | AR  | DR   | SP  | BR   | AC   | PS  | NZVC | Адр | Знач |
|-------|------|-----|------|-----|------|-----|------|------|-----|------|-----|------|
| 4B2   | AF40 | 4B3 | AF40 | 4B2 | 0040 | 000 | 0040 | 0040 | 000 | 0000 |     |      |
| 4B3   | 0680 | 4B4 | 0680 | 4B3 | 0680 | 000 | 04B3 | 4000 | 000 | 0000 |     |      |
| 4B4   | 0500 | 4B5 | 0500 | 4B4 | 4000 | 000 | 04B4 | 8000 | 00A | 1010 |     |      |
| 4B5   | EEFB | 4B6 | EEFB | 4B1 | 8000 | 000 | FFFB | 8000 | 00A | 1010 | 4B1 | 8000 |
| 4B6   | AF04 | 4B7 | AF04 | 4B6 | 0004 | 000 | 0004 | 0004 | 000 | 0000 |     |      |
| 4B7   | EEF8 | 4B8 | EEF8 | 4B0 | 0004 | 000 | FFF8 | 0004 | 000 | 0000 | 4B0 | 0004 |
| 4B8   | 4EF5 | 4B9 | 4EF5 | 4AE | 04C7 | 000 | FFF5 | 04CB | 000 | 0000 |     |      |
| 4B9   | EEF5 | 4BA | EEF5 | 4AF | 04CB | 000 | FFF5 | 04CB | 000 | 0000 | 4AF | 04CB |
| 4BA   | ABF4 | 4BB | ABF4 | 4CA | F100 | 000 | FFF4 | F100 | 008 | 1000 | 4AF | 04CA | <!-- -->
| 4BB   | 0480 | 4BC | 0480 | 4BB | 0480 | 000 | 04BB | 7880 | 000 | 0000 |     |      |
| 4BC   | F407 | 4BD | F407 | 4BC | F407 | 000 | 04BC | 7880 | 000 | 0000 |     |      |
| 4BD   | 0480 | 4BE | 0480 | 4BD | 0480 | 000 | 04BD | 3C40 | 000 | 0000 |     |      |
| 4BE   | F405 | 4BF | F405 | 4BE | F405 | 000 | 04BE | 3C40 | 000 | 0000 |     |      |
| 4BF   | 0400 | 4C0 | 0400 | 4BF | 0400 | 000 | 04BF | 7880 | 000 | 0000 |     |      |
| 4C0   | 0400 | 4C1 | 0400 | 4C0 | 0400 | 000 | 04C0 | F100 | 00A | 1010 |     |      |
| 4C1   | 7EEF | 4C2 | 7EEF | 4B1 | 8000 | 000 | FFEF | F100 | 001 | 0001 |     |      |
| 4C2   | F801 | 4C3 | F801 | 4C2 | F801 | 000 | 04C2 | F100 | 001 | 0001 |     |      |
| 4C3   | EEED | 4C4 | EEED | 4B1 | F100 | 000 | FFED | F100 | 001 | 0001 | 4B1 | F100 |
| 4C4   | 84B0 | 4C5 | 84B0 | 4B0 | 0003 | 000 | 0002 | F100 | 001 | 0001 | 4B0 | 0003 |
| 4C5   | CEF4 | 4BA | CEF4 | 4C5 | 04BA | 000 | FFF4 | F100 | 001 | 0001 |     |      |
| 4BA   | ABF4 | 4BB | ABF4 | 4C9 | D4BA | 000 | FFF4 | D4BA | 009 | 1001 | 4AF | 04C9 |
| 4BB   | 0480 | 4BC | 0480 | 4BB | 0480 | 000 | 04BB | EA5D | 00A | 1010 |     |      |
| 4BC   | F407 | 4BD | F407 | 4BC | F407 | 000 | 04BC | EA5D | 00A | 1010 |     |      |
| 4BD   | 0480 | 4BE | 0480 | 4BD | 0480 | 000 | 04BD | 752E | 003 | 0011 |     |      |
| 4BE   | F405 | 4C4 | F405 | 4BE | F405 | 000 | 0005 | 752E | 003 | 0011 |     |      |
| 4C4   | 84B0 | 4C5 | 84B0 | 4B0 | 0002 | 000 | 0001 | 752E | 003 | 0011 | 4B0 | 0002 |
| 4C5   | CEF4 | 4BA | CEF4 | 4C5 | 04BA | 000 | FFF4 | 752E | 003 | 0011 |     |      |
| 4BA   | ABF4 | 4BB | ABF4 | 4C8 | F003 | 000 | FFF4 | F003 | 009 | 1001 | 4AF | 04C8 |
| 4BB   | 0480 | 4BC | 0480 | 4BB | 0480 | 000 | 04BB | F801 | 009 | 1001 |     |      |
| 4BC   | F407 | 4C4 | F407 | 4BC | F407 | 000 | 0007 | F801 | 009 | 1001 |     |      |
| 4C4   | 84B0 | 4C5 | 84B0 | 4B0 | 0001 | 000 | 0000 | F801 | 009 | 1001 | 4B0 | 0001 |
| 4C5   | CEF4 | 4BA | CEF4 | 4C5 | 04BA | 000 | FFF4 | F801 | 009 | 1001 |     |      |
| 4BA   | ABF4 | 4BB | ABF4 | 4C7 | 0802 | 000 | FFF4 | 0802 | 001 | 0001 | 4AF | 04C7 |
| 4BB   | 0480 | 4BC | 0480 | 4BB | 0480 | 000 | 04BB | 8401 | 00A | 1010 |     |      |
| 4BC   | F407 | 4BD | F407 | 4BC | F407 | 000 | 04BC | 8401 | 00A | 1010 |     |      |
| 4BD   | 0480 | 4BE | 0480 | 4BD | 0480 | 000 | 04BD | 4200 | 003 | 0011 |     |      |
| 4BE   | F405 | 4C4 | F405 | 4BE | F405 | 000 | 0005 | 4200 | 003 | 0011 |     |      |
| 4C4   | 84B0 | 4C6 | 84B0 | 4B0 | 0000 | 000 | FFFF | 4200 | 003 | 0011 | 4B0 | 0000 |
| 4C6   | 0100 | 4C7 | 0100 | 4C6 | 0100 | 000 | 04C6 | 4200 | 003 | 0011 |     |      |

<!-- Входные данные: -->
<!-- - B =  DEE8
- E = ACDC
- D = 5431

| Адрес | Код  | IP  | CR   | AR  | DR | SP | BR  | AC | NZVC | Адрес | Новый код |
|-------|------|-----|------|-----|----|----|-----|----|------|-------|-----------|
| 17B   | A184 | 17C | A184 | 184 | ACDC   | -  | 17B | ACDC    | 1000      | -     |           |
| 17C   | 2183 | 17D | 2183 | 183 | 5431   | -  | 17C | 0410   | 0000     | -     |           |
| 17D   | E17A | 17E | E17A | 17A | 0410   | -  | 17D | 0410   | 0000     | 17A   | 0410          |
| 17E   | 0200 | 17F | 0200 | 17E | 0200   | -  | 17E | 0000   | 0100     | -     |           |
| 17F   | 4179 | 180 | 4179 | 179 | DEE8   | -  | 17F | DEE8   | 1000     | -     |           |
| 180   | 417A | 181 | 417A | 17A | 0410   | -  | 181 | E2F8   | 1000     | -  |           |
| 181   | E178 | 182 | E178 | 178 | E2F8   | -  | 181 | E2F8   | 1000     | 178   | E2F8          |
| 182   | 0100 | 183 | 0100 | 182 | 0100   | -  | 182 | E2F8   | 1000     | -     |           | -->



| Адрес | Код  | Мнемоника  | Комментарий                                                              |
|-------|------|------------|--------------------------------------------------------------------------|
| 4AE   | 04C7 |            |                                                                          | unchangable
| 4AF   | 0200 |            |                                                                          |
| 4B0   | E000 |            | M                                                                        |
| 4B1   | E000 |            |                                                                          |
| 4B2   | AF40 | LD #40     | Запись значения #40 в аккумулятор                                        | ac = 0040
| 4B3   | 0680 | SWAB       | Обмен ст. и мл. байта аккумулятора                                       | ac = 4000
| 4B4   | 0500 | ASL        | Арифметический сдвиг влево значения аккумулятора                         | ac = 8000 n=1 v=1
| 4B5   | EEFB | ST 0x4B1   | Запись значения аккумулятора в 4B1                                       | 0x4B1 = 8000
| 4B6   | AF04 | LD #04     | Запись значения #04 в аккумулятор                                        | ac = 0004 n=0 v=0
| 4B7   | EEF8 | ST 0x4B0   | Запись значения аккумулятора в 0x4B0                                     | 0x4B0 = 0004
| 4B8   | 4EF5 | ADD 0x4AE  | Сложить содержимое ячейки 0x4AE с аккумулятором и записать в аккумулятор | ac = 04CB
| 4B9   | EEF5 | ST 0x4AF   | Запись значения аккумулятора в 0x4AF                                     | 0x4AF = 04CB
| 4BA   | ABF4 | LD         | Записать в аккумулятор значение ячейки 0x4AF -1                          | value of 4CB-1 = 4CA ac = F100 n=1 0x4AF = 04CA
| 4BB   | 0480 | ROR        | Циклический сдвиг вправо значения аккумулятора                           | ac = 7880 n=0
| 4BC   | F407 | BCS        | если флаг С==1 перейти в ячейку 0x4С4                                    | - 
| 4BD   | 0480 | ROR        | Циклический сдвиг вправо значения аккумулятора                           | ac = 3C40
| 4BE   | F405 | BCS        | если флаг С==1 перейти в ячейку 0x4С4                                    | - 
| 4BF   | 0400 | ROL        | Циклический сдвиг влево значения аккумулятора                            | ac = 7880
| 4C0   | 0400 | ROL        | Циклический сдвиг влево значения аккумулятора                            | ac = F100 n=1 v=1
| 4C1   | 7EEF | CMP        | выставить флаги по разности значения ячейки 0x4B1 и аккумулятора         | c=1
| 4C2   | F801 | BLT        | если флаг N!=V перейти в ячейку 0x4С4                                    |
| 4C3   | EEED | ST 0x4B1   | Запись значения аккумулятора в 0x4B1                                     | 0x4B1 = F100
| 4C4   | 84B0 | LOOP       | Цикл со счетчиком M                                                      | 0x4B0 = 0003 
| 4C5   | CEF4 | JUMP       | перейти в начало цикла (0x4BA)                                           | jump to 0x4BA
| 4C6   | 0100 | HLT        | Остановка                                                                |
| 4C7   | 0802 |            |                                                                          |
| 4C8   | F003 |            |                                                                          |
| 4C9   | D4BA |            |                                                                          |
| 4CA   | F100 |            |                                                                          |